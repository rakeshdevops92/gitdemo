# Define Variables
$token = "your-personal-access-token" # Replace with your GitHub Personal Access Token
$owner = "owner-name" # Replace with the owner of the repository
$repo = "repository-name" # Replace with the repository name
$branch = "branch-name" # Replace with the branch name

# Define Headers
$headers = @{
    "Authorization" = "Bearer $token"
    "Accept" = "application/vnd.github+json; api-version=2022-11-28"
}

# API URL for getting branch protection
$apiUrl = "https://<your-github-enterprise-server>/api/v3/repos/$owner/$repo/branches/$branch/protection"

# Retrieve branch protection rules
try {
    $branchProtectionRules = Invoke-RestMethod -Uri $apiUrl -Method Get -Headers $headers
    # Output the branch protection rules
    $branchProtectionRules | ConvertTo-Json | Write-Output
}
catch {
    Write-Error "Failed to retrieve branch protection rules: $_"
}
