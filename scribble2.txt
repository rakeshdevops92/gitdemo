# Define parameters
$owner = "repo-owner" # Replace with the repository owner's username
$repo = "repo-name" # Replace with the repository name
$branch = "main" # Replace with the branch name
$token = "your-personal-access-token" # Replace with your GitHub Personal Access Token

# Set up the header with authorization
$headers = @{
    Authorization = "token $token"
    Accept = "application/vnd.github.v3+json"
}

# Define the URI for the branch protection API
$uri = "https://api.github.com/repos/$owner/$repo/branches/$branch/protection"

# Execute the REST API call to get branch protection rules
try {
    $response = Invoke-RestMethod -Uri $uri -Method Get -Headers $headers
    # Output the branch protection rules
    $response | ConvertTo-Json | Write-Output
}
catch {
    # Catch and display any errors
    Write-Error "Failed to retrieve branch protection rules. Error: $_"
}
