function Update-JsonFile {
    param (
        [string]$FileName,
        [string]$ChannelType,
        [string]$NewClientId,
        [string]$NewClientSecret
    )

    # Read the JSON content from the file and convert it to a PowerShell object
    $jsonData = Get-Content -Path $FileName | ConvertFrom-Json

    # Traverse through the 'AccountSettings' array and update the specified fields
    $jsonData.AccountSettings | ForEach-Object {
        if ($_.CustomizationKey -eq 'Rogers') {
            foreach ($channel in $_.Channels) {
                if ($channel.ChannelType -eq $ChannelType) {
                    $channel.ClientId = $NewClientId
                    $channel.ClientSecret = $NewClientSecret
                }
            }
        }
    }

    # Convert the updated PowerShell object back to JSON format with a higher depth
    $jsonOutput = $jsonData | ConvertTo-Json -Depth 20

    # Save the updated JSON content back to the original file
    Set-Content -Path $FileName -Value $jsonOutput
}

Update-JsonFile -FileName 'test.json' -ChannelType 'External' -NewClientId '000' -NewClientSecret '453335'
