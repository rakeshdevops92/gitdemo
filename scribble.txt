# Check if the provider is registered
$registrationStatus = Get-AzProviderFeature -ProviderNamespace Microsoft.Quota -FeatureName quotaApi

# Register the provider if not already registered
if ($registrationStatus.RegistrationState -ne 'Registered') {
    Register-AzProviderFeature -ProviderNamespace Microsoft.Quota -FeatureName quotaApi
    Write-Output "Microsoft.Quota provider registered."
} else {
    Write-Output "Microsoft.Quota provider is already registered."
}
