param (
    [Parameter(Mandatory = $true)]
    [string] $ResourceGroupName,
    
    [Parameter(Mandatory = $true)]
    [string] $DiskName,
    
    [Parameter(Mandatory = $true)]
    [int] $NewDiskSizeGB
)

# Authenticate to Azure
$connection = Get-AutomationConnection -Name 'AzureRunAsConnection'
Connect-AzAccount -ServicePrincipal `
    -TenantId $connection.TenantId `
    -ApplicationId $connection.ApplicationId `
    -CertificateThumbprint $connection.CertificateThumbprint

# Get the disk
$disk = Get-AzDisk -ResourceGroupName $ResourceGroupName -DiskName $DiskName

# Increase the disk size
$disk.DiskSizeGB = $NewDiskSizeGB

# Update the disk
Update-AzDisk -ResourceGroupName $ResourceGroupName -Disk $disk

# Disconnect from Azure
Disconnect-AzAccount
